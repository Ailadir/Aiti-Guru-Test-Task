# AirGuru - Система управления товарами

Современное веб-приложение для управления товарами с полным функционалом CRUD операций, корзиной покупок и расширенными возможностями сортировки и фильтрации.

## Содержание

- [Технологический стек](#технологический-стек)
- [Архитектура проекта](#архитектура-проекта)
- [Основные функции](#основные-функции)
- [Функции сверх ТЗ](#функции-сверх-тз)
- [Установка и запуск](#установка-и-запуск)
- [Структура проекта](#структура-проекта)
- [Использование AI в разработке](#использование-ai-в-разработке)

## Технологический стек

### Основные технологии

- **React 19** - UI библиотека
- **TypeScript** - типизация
- **Vite** - сборщик проекта
- **SCSS Modules** - стилизация компонентов

### Управление состоянием и данными

- **Zustand** - глобальное состояние (auth, products, cart)
- **TanStack Query (React Query)** - серверное состояние, кеширование, синхронизация
- **Axios** - HTTP клиент с interceptors для авторизации

### UI и иконки

- **Phosphor Icons** - набор иконок
- **CSS Grid** - гибкая табличная разметка

### API

- **DummyJSON API** - источник данных для продуктов и авторизации

### Роутинг

- **React Router v6** - клиентская маршрутизация с защищенными роутами

### Ключевые архитектурные решения

#### 1. **Разделение concerns**

- **API слой** (\`src/api/\`) - изолированная логика работы с API
- **Store** (\`src/store/\`) - глобальное состояние приложения
- **Components** - переиспользуемые UI компоненты
- **Pages** - страницы-контейнеры

#### 2. **Type Safety**

- Строгая типизация TypeScript
- Использование \`import type\` для предотвращения runtime ошибок
- Интерфейсы для всех API responses

#### 3. **Оптимизация производительности**

- \`useMemo\` для тяжелых вычислений (сортировка, фильтрация)
- TanStack Query для кеширования и дедупликации запросов
- CSS Modules для изоляции стилей

#### 4. **Персистентность данных**

- LocalStorage для токена авторизации
- LocalStorage для корзины покупок
- LocalStorage для сохранения email/пароля (опционально)
- Автоматическое восстановление сессии при перезагрузке

## Основные функции

### Аутентификация

- Форма входа с валидацией
- Сохранение токена в localStorage
- Автоматическая подстановка токена в запросы (Axios interceptor)
- Защищенные роуты
- Автовосстановление сессии при перезагрузке страницы
- Чекбокс "Сохранить пароль" для автозаполнения
- Выход из системы с очисткой токена

### Управление товарами

- Просмотр списка товаров с пагинацией
- Поиск по названию товара
- Добавление нового товара (локально)
- Удаление товара
- Отображение полной информации о товаре:
  - Фото товара
  - Название и категория
  - Вендор (бренд)
  - Артикул (генерируется по ID)
  - Рейтинг с цветовой индикацией (< 4.0 - красный)
  - Цена с форматированием (пробелы для тысяч, серые центы)
  - Индикатор количества (визуальный с 3 уровнями)

### Таблица товаров

- Адаптивный CSS Grid layout
- Множественный выбор товаров (чекбоксы)
- Визуальная подсветка выбранных товаров
- Пагинация с навигацией
- Информация о показанных элементах

## Функции сверх ТЗ

### 1. **Расширенная сортировка**

- Сортировка по ВСЕМ полям таблицы:
  - Наименование (по алфавиту)
  - Вендор (по алфавиту)
  - Артикул (по ID)
  - Оценка (по рейтингу)
  - Цена (по возрастанию/убыванию)
  - Количество (по stock)
- Двунаправленная сортировка (ASC/DESC)
- Визуальные индикаторы направления сортировки (стрелки)
- Dropdown меню сортировки с иконками
- Кликабельные заголовки колонок для быстрой сортировки

### 2. **Корзина покупок**

- Полнофункциональная корзина с:
  - Добавление товаров в корзину (+)
  - Счетчик товаров на иконке корзины
  - Dropdown с содержимым корзины
  - Отображение фото, названия, количества и цены
  - Удаление отдельных товаров
  - Очистка всей корзины
  - Подсчет общей стоимости
  - Кнопка "Оформить заказ"
  - Сохранение в localStorage

### 3. **Улучшенный UX**

- - Иконки в навигации (Globe, Bell, Mail, Cart, Menu)
- - Визуальный индикатор количества товара (3-уровневый bar chart)
- - Цветовая индикация низкого рейтинга (красный < 4.0)
- - Форматирование цены (пробелы, серые центы)
- - Overflow меню для действий с товаром
- - Меню пользователя с выходом
- - Кнопка обновления списка товаров
- - Клик вне области для закрытия dropdown меню

### 4. **Продвинутое управление состоянием**

- - Комбинирование API товаров с локально добавленными
- - Сортировка работает для всех товаров (API + локальные)
- - Очистка локальных товаров при обновлении
- - Сохранение выбранных товаров

### 5. **Типизация и безопасность**

- - Полная TypeScript типизация
- - Использование \`import type\` для интерфейсов
- - Type-safe API calls
- - Валидация форм

### 6. **Оптимизация и производительность**

- - Мемоизация сортировки (useMemo)
- - React Query кеширование
- - Оптимизация ререндеров
- - Debounced поиск (встроен в React Query)

### 7. **Дизайн**

- - Pixel-perfect реализация Figma дизайна
- - Responsive layout
- - Плавные анимации и transitions
- - Градиенты и тени согласно дизайн-системе
- - CSS Grid для таблицы (вместо флексбокс)

## Установка и запуск

### Требования

- Node.js 18+
- npm или yarn

### Установка зависимостей

\`\`\`bash
npm install
\`\`\`

### Запуск dev сервера

\`\`\`bash
npm run dev
\`\`\`

Приложение будет доступно по адресу: \`http://localhost:5173\`

### Сборка для production

\`\`\`bash
npm run build
\`\`\`

### Preview production build

\`\`\`bash
npm run preview
\`\`\`

## Структура проекта

\`\`\`
src/
├── api/ # API слой
│ ├── axios.ts # Настроенный Axios instance с interceptors
│ ├── auth.ts # API методы авторизации
│ └── products.ts # API методы для товаров
│
├── components/ # React компоненты
│ ├── Auth/
│ │ ├── LoginForm.tsx # Форма авторизации
│ │ └── LoginForm.module.scss
│ │
│ ├── Products/
│ │ ├── ProductsTable.tsx # Главная таблица товаров
│ │ └── ProductsTable.module.scss
│ │
│ ├── Modals/
│ │ ├── AddProductModal.tsx # Модалка добавления товара
│ │ └── AddProductModal.module.scss
│ │
│ └── Common/ # Переиспользуемые компоненты
│ ├── OverflowMenu.tsx # Меню действий (удалить)
│ ├── CartDropdown.tsx # Dropdown корзины
│ ├── SortMenu.tsx # Меню сортировки
│ ├── UserMenu.tsx # Меню пользователя (выход)
│ └── \*.module.scss
│
├── store/ # Zustand stores
│ ├── useAuthStore.ts # Состояние авторизации
│ ├── useProductsStore.ts # Локальные товары и выбор
│ └── useCartStore.ts # Корзина покупок
│
├── pages/ # Страницы-контейнеры
│ ├── LoginPage.tsx
│ └── ProductsPage.tsx
│
├── styles/ # Глобальные стили
│ ├── variables.scss # Design tokens из Figma
│ └── globals.scss # Глобальные стили и resets
│
├── lib/
│ └── queryClient.ts # Конфигурация TanStack Query
│
├── App.tsx # Корневой компонент с роутингом
└── main.tsx # Entry point
\`\`\`

## Дизайн система

Все стили строго следуют дизайну из Figma:

- **Шрифты**: Inter, Cairo, Open Sans, Roboto, Roboto Mono
- **Цветовая палитра**: переменные в \`variables.scss\`
- **Отступы**: система spacing tokens
- **Радиусы**: от 4px до 100px
- **Тени**: multi-layer shadows для depth
- **Градиенты**: linear gradients для кнопок и карточек

## Авторизация

### Тестовые данные для входа

\`\`\`
Email: emilys
Пароль: emilyspass
\`\`\`

(Это учетные данные из DummyJSON API)

## Особенности реализации

### 1. Токен авторизации

- Токен сохраняется в localStorage при логине
- Автоматически добавляется ко всем запросам через Axios interceptor
- При перезагрузке страницы сессия восстанавливается из localStorage
- Токен удаляется при выходе

### 2. Комбинирование данных

Локально добавленные товары комбинируются с товарами из API в одну таблицу. Все операции (сортировка, выбор, поиск) работают с общим списком.

### 3. Сортировка

Сложная логика сортировки реализована через \`useMemo\` с поддержкой:

- Всех типов данных (строки, числа)
- Case-insensitive сортировка для текста
- Fallback для отсутствующих полей
- Двунаправленная сортировка (ASC/DESC)

### 4. Grid система

Вместо традиционного flexbox используется CSS Grid для точного выравнивания колонок:
\`\`\`scss
grid-template-columns: 2fr 1.5fr 1fr 0.8fr 1fr 0.8fr 160px;
\`\`\`

## Логика работы

### Добавление товара

1. Открывается модальное окно
2. Заполняются поля формы
3. POST запрос на API (для демонстрации)
4. Товар добавляется в локальный store
5. Таблица обновляется мгновенно

### Удаление товара

- **Локальные товары**: удаляются из store
- **API товары**: отправляется DELETE запрос (без refetch)

### Обновление списка

Кнопка "Обновить":

1. Очищает локально добавленные товары
2. Refetch данных с API
3. Обновляет таблицу

### Корзина

- Товары добавляются с quantity = 1
- При повторном добавлении quantity увеличивается
- Общая стоимость пересчитывается автоматически
- Данные сохраняются в localStorage

## Результаты

- Pixel-perfect реализация дизайна
- Полностью типизированный код
- Оптимизированная производительность
- Расширенный функционал (корзина, сортировка, etc.)
- Responsive и адаптивный UI
- Качественная архитектура

## Использование AI в разработке

При разработке проекта использовался Claude AI исключительно для верстки и создания UI компонентов. Примеры промптов:

### Парсинг стилей из Figma

```
"У меня есть CSS экспорт из Figma с переменными цветов, шрифтов и отступов.
Преобразуй их в SCSS переменные."
```

### Создание UI компонентов

```
"Создай компонент UserMenu с кнопкой выхода, который открывается по клику
и закрывается при клике вне области."
```

### Верстка таблицы

```
"Сверстай таблицу с CSS Grid - первая колонка растягивается,
остальные фиксированной ширины."
```

### Стилизация элементов

```
"Форматируй цену с пробелами для тысяч, центы серым цветом.
Рейтинг ниже 4.0 красным."
```

### Правки верстки

```
"Выравнивание колонок - первый элемент flush left,
кнопки действий flush right, без боковых отступов."
```

**AI использовался только для**:
- Верстки компонентов (формы, таблицы, модалки, дропдауны)
- Преобразования Figma CSS в SCSS переменные
- Создания UI элементов (меню, индикаторы, кнопки)
- Настройки CSS Grid и позиционирования
- Правок и доработок стилей
- Написания документации (README.md)

**Вся ключевая разработка выполнена вручную**:
- Zustand stores (auth, products, cart) - вся логика состояния
- API слой (axios interceptors, endpoints, типизация)
- Логика сортировки и фильтрации товаров
- TanStack Query интеграция и управление кешем
- Бизнес-логика (корзина, выбор товаров, пагинация)
- Архитектурные решения и структура проекта
- Вся TypeScript типизация

---

**Разработано с использованием React 19, TypeScript, Zustand и TanStack Query**

**API**: [DummyJSON](https://dummyjson.com)
